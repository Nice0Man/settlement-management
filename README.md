# Отчёт о тестировании системы управления поселениями

## Обзор

В данном документе приведены результаты автоматизированного тестирования системы управления поселениями. Тестирование охватывает следующие аспекты:
- **Вставка данных** – проверка корректного заполнения всех таблиц тестовыми данными.
- **Выборка данных** – проверка правильности выполнения запросов для извлечения данных.
- **Тестирование триггеров** – проверка работы автоматических действий (например, генерация уведомлений, обновление статуса инцидентов).
- **Нагрузочное тестирование** – оценка производительности базы данных при большом объёме операций.

Тесты выполнялись асинхронно с использованием SQLAlchemy (asyncpg) и результаты выводились с помощью библиотеки Rich для наглядного отображения.

## Тестовые модули

В проекте реализованы следующие тестовые модули:
- **insert_test.py** – скрипт для автоматического заполнения базы данных тестовыми данными.
- **select_test.py** – скрипт для выборки данных и проверки корректности их извлечения.
- **triggers_test.py** – модуль для проверки работы триггеров (например, контроль уровня ресурсов, автоматическое обновление инцидентов, эскалация просроченных задач, перераспределение ресурсов, контроль потребления энергии).
- **stress_test.py** – модуль для проведения нагрузочного тестирования базы данных.

## Результаты тестирования

Ниже представлена сводная таблица с результатами тестирования по каждому модулю:

| Модуль               | Статус      | Описание                                                        |
|----------------------|-------------|-----------------------------------------------------------------|
| insert_test.py       | Успешно     | Все таблицы заполнены тестовыми данными без ошибок.             |
| select_test.py       | Успешно     | Запросы выборки данных выполнены корректно.                     |
| triggers_test.py     | Успешно     | Триггеры срабатывают, как ожидается (уведомления, обновление инцидентов и т.д.). |
| stress_test.py       | Успешно     | Нагрузочное тестирование прошло успешно, показатели приемлемы.   |

> **Примечание:** Фактические показатели зависят от конфигурации системы и нагрузочных условий.

## Детали тестирования

### 1. Вставка данных (insert_test.py)
- **Поселение:** Создана запись для поселения «Arctic Base» с регионом «North Pole» и климатическими условиями «Arctic».
- **Инфраструктура:** Добавлена запись инфраструктурного объекта «Solar Power Plant», связанного с поселением.
- **Ресурсы:** Вставлены записи для трёх ресурсов – «Water», «Food» и «Fuel».
- **Операции с ресурсами:** Для каждого ресурса сгенерировано по 5 операций (как потребление, так и пополнение) с корректными значениями количества (отрицательные для потребления и положительные для пополнения).
- **Устройства (датчики):** Добавлена запись о датчике «Temperature Sensor», привязанном к инфраструктуре.
- **Прочие сущности:** Заполнены таблицы инцидентов, задач, персонала, событий, транспортных средств, логистических маршрутов, планов использования ресурсов, маршрутов, уведомлений и геозон.
  
Все записи успешно добавлены, что подтверждается зелёными сообщениями в логах.

### 2. Выборка данных (select_test.py)
- Выполнены запросы к таблицам, возвращающие данные, ранее вставленные с помощью `insert_test.py`.
- Результаты выборок соответствуют ожидаемым значениям, что подтверждает корректное заполнение таблиц.

### 3. Тестирование триггеров (triggers_test.py)
- **Контроль уровня ресурсов:** При снижении уровня ресурса ниже критического порога триггер генерирует уведомление.
- **Обновление статуса инцидента:** При пополнении ресурса, связанного с открытым инцидентом, его статус обновляется на «устранен».
- **Эскалация просроченных задач:** При приближении дедлайна задачи генерируется уведомление, а при просрочке – эскалируется задача старшему персоналу.
- **Перераспределение ресурсов:** При обнаружении дефицита ресурса в одном поселении и избытке в другом инициируется перераспределение.
- **Контроль потребления энергии:** При превышении лимита энергопотребления устройств создается соответствующее уведомление.

Все триггерные механизмы сработали корректно.

### 4. Нагрузочное тестирование (stress_test.py)
- Проведено массовое вставление записей (например, 10 000 операций с ресурсами).
- Замер времени выполнения массовой вставки показал, что база данных справляется с высокой нагрузкой.
- Результаты нагрузочного тестирования подтверждают стабильную работу системы при большом объёме данных.

## Заключение

Проведённое тестирование подтверждает, что система управления поселениями корректно работает во всех ключевых направлениях: вставка данных, выборка, работа триггеров и нагрузочное тестирование. Все показатели соответствуют ожиданиям, а производительность базы данных остается стабильной даже при высоких нагрузках.

## Источники

- **PostgreSQL и PostGIS: Руководство для разработчиков** [Электронный ресурс]. — Режим доступа: Интернет: [https://postgis.net/documentation](https://postgis.net/documentation) (дата обращения: 07.10.2024).
- **QGIS Documentation** [Электронный ресурс]. — Режим доступа: Интернет: [https://docs.qgis.org/latest/en/docs](https://docs.qgis.org/latest/en/docs) (дата обращения: 07.10.2024).
- **Sams Т. Learning PostgreSQL 13: A beginner's guide to building high-performance PostgreSQL database solutions**. — Packt Publishing, 2021. — 486 p.
- **Географические информационные системы (GIS): Обзор** [Электронный ресурс]. — Режим доступа: Интернет: [https://gisgeography.com/](https://gisgeography.com/) (дата обращения: 07.10.2024).

---


